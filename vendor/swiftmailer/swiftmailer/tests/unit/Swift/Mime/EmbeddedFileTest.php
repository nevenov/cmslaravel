<?php

<<<<<<< HEAD
=======

>>>>>>> dev
class Swift_Mime_EmbeddedFileTest extends Swift_Mime_AttachmentTest
{
    public function testNestingLevelIsAttachment()
    {
<<<<<<< HEAD
        //Overridden
=======
        // previous loop would fail if there is an issue
        $this->addToAssertionCount(1);
>>>>>>> dev
    }

    public function testNestingLevelIsEmbedded()
    {
<<<<<<< HEAD
        $file = $this->_createEmbeddedFile($this->_createHeaderSet(),
            $this->_createEncoder(), $this->_createCache()
            );
        $this->assertEquals(
            Swift_Mime_MimeEntity::LEVEL_RELATED, $file->getNestingLevel()
=======
        $file = $this->createEmbeddedFile($this->createHeaderSet(),
            $this->createEncoder(), $this->createCache()
            );
        $this->assertEquals(
            Swift_Mime_SimpleMimeEntity::LEVEL_RELATED, $file->getNestingLevel()
>>>>>>> dev
            );
    }

    public function testIdIsAutoGenerated()
    {
<<<<<<< HEAD
        $headers = $this->_createHeaderSet(array(), false);
=======
        $headers = $this->createHeaderSet([], false);
>>>>>>> dev
        $headers->shouldReceive('addIdHeader')
                ->once()
                ->with('Content-ID', '/^.*?@.*?$/D');

<<<<<<< HEAD
        $file = $this->_createEmbeddedFile($headers, $this->_createEncoder(),
            $this->_createCache()
=======
        $file = $this->createEmbeddedFile($headers, $this->createEncoder(),
            $this->createCache()
>>>>>>> dev
            );
    }

    public function testDefaultDispositionIsInline()
    {
<<<<<<< HEAD
        $headers = $this->_createHeaderSet(array(), false);
=======
        $headers = $this->createHeaderSet([], false);
>>>>>>> dev
        $headers->shouldReceive('addParameterizedHeader')
                ->once()
                ->with('Content-Disposition', 'inline');
        $headers->shouldReceive('addParameterizedHeader')
                ->zeroOrMoreTimes();

<<<<<<< HEAD
        $file = $this->_createEmbeddedFile($headers, $this->_createEncoder(),
            $this->_createCache()
            );
    }

    protected function _createAttachment($headers, $encoder, $cache, $mimeTypes = array())
    {
        return $this->_createEmbeddedFile($headers, $encoder, $cache, $mimeTypes);
    }

    private function _createEmbeddedFile($headers, $encoder, $cache)
    {
        return new Swift_Mime_EmbeddedFile($headers, $encoder, $cache, new Swift_Mime_Grammar());
=======
        $file = $this->createEmbeddedFile($headers, $this->createEncoder(),
            $this->createCache()
            );
    }

    protected function createAttachment($headers, $encoder, $cache, $mimeTypes = [])
    {
        return $this->createEmbeddedFile($headers, $encoder, $cache, $mimeTypes);
    }

    private function createEmbeddedFile($headers, $encoder, $cache)
    {
        $idGenerator = new Swift_Mime_IdGenerator('example.com');

        return new Swift_Mime_EmbeddedFile($headers, $encoder, $cache, $idGenerator);
>>>>>>> dev
    }
}
